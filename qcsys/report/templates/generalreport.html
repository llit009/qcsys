{% extends 'r_layout.html'%}

{% block body %}
<div class="container pt-5">
  <h1 class="text-center rp_title">综合投诉统计</h1>
    {% from "r_includes/r_formhelpers.html" import render_field %}
 <div class="jumbotron rp_reports_bg h-100">
    <form action="" method="post" class="form-inline">
        <div class="form-group mb-1">
            <h5>请选择: </h5>
        </div>
        <div class="form-group mx-2 mb-2">
            {{render_field(dateform.start_date, class_="form-control")}}
        </div>
        <div class="form-group mx-1 mb-2">
            {{render_field(dateform.end_date, class_="form-control")}}
        </div>
        <div class="form-group mx-3 mb-2">
            {{render_field(category.type, class_="form-control")}}
        </div>
        <div class="form-group mx-2">
        <input type="submit" class="btn btn-primary" value="生成报告">
        </div>
    </form>
     <p class="font-weight-light text-danger font-italic">开始日期必须早于或等于结束日期</p>
     <a href="/report" class="btn btn-warning pull-right">返回报告主页</a>
 </div>
</div>

{% if g_report %}
<div class="container pt-2">
 <div class="jumbotron rp_reports_bg h-100">
     <table class="table table-hover table-striped">
      <thead>
        <tr>
          <th scope="col">资源项目</th>
          <th scope="col">投诉数量</th>
        </tr>
      </thead>
      <tbody>
      {% for report in g_report%}
            <tr>
                <th>{{report.name|safe}}</th>
                <td>{{report.subtotal|safe}}</td>
            </tr>
      {% endfor %}
      </tbody>
     </table>
 </div>
</div>
{% endif %}
{% endblock %}